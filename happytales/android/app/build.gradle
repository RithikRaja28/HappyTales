// Top-level build file where you can add configuration options common to all sub-projects/modules.
ext.kotlin_version = '2.0.0'
// Apply the Android and Kotlin Gradle plugins
plugins {
    id "com.android.application"
    id "kotlin-android"
    id 'com.google.gms.google-services' // Apply the Google Services plugin for Firebase
    id "dev.flutter.flutter-gradle-plugin" // Apply the Flutter Gradle Plugin
}

// Load local properties from local.properties file
def localProperties = new Properties()
def localPropertiesFile = rootProject.file("local.properties")
if (localPropertiesFile.exists()) {
    localPropertiesFile.withReader("UTF-8") { reader ->
        localProperties.load(reader)
    }
}

// Set default values for Flutter version code and version name
def flutterVersionCode = localProperties.getProperty("flutter.versionCode", "1")
def flutterVersionName = localProperties.getProperty("flutter.versionName", "1.0")

// Configure the Android block
android {
    compileSdkVersion flutter.compileSdkVersion // Use the Flutter compile SDK version
    buildToolsVersion flutter.buildToolsVersion // Use the Flutter build tools version
    defaultConfig {
        applicationId "com.example.happytales" // Change to your application ID
        minSdkVersion 23 // Minimum SDK version required by your app
        targetSdkVersion flutter.targetSdkVersion // Target SDK version
        versionCode flutterVersionCode.toInteger() // Version code
        versionName flutterVersionName // Version name
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

// Configure the Flutter block
flutter {
    source '../..' // Flutter project directory
}

// Add dependencies
dependencies {
    implementation platform('com.google.firebase:firebase-bom:33.1.0') // Firebase BOM
    implementation 'com.google.firebase:firebase-analytics' // Firebase Analytics
    implementation 'com.google.firebase:firebase-auth' // Firebase Authentication
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version" // Kotlin Standard Library
}
